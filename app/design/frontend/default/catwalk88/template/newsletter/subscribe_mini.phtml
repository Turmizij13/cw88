<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<!-- Begin MailChimp Signup Form -->


<div id="mc_embed_signup" class="block-subscribe">
<form
	action="http://catwalk88.us7.list-manage1.com/subscribe/post?u=3934a2fa249e40316ae4b46b0&amp;id=700291c66a"
	method="post" id="mc-embedded-subscribe-form"
	name="mc-embedded-subscribe-form" class="validate" target="_blank"
	novalidate>
<div class="mc-field-group fl" style="width:120px;"><input type="email" style="width:115px;" value=""
	name="EMAIL" class="required email input-text" id="mce-EMAIL" placeholder="<?php echo $this->__('ENTER YOUR EMAIL')?>" ></div>
<div class="actions fl"><button class="button" type="submit"	name="subscribe" id="mc-embedded-subscribe" class="button"><span><span><?php echo $this->__('GO')?></span></span></button></div>
<div id="mce-responses" class="fl" style="width:156px;">
<div class="response" id="mce-error-response" style="display: none"></div>
<div class="response" id="mce-success-response" style="display: none"></div>
</div>
</form>
</div>
<script type="text/javascript">
	var fnames = new Array();
	var ftypes = new Array();
	fnames[0] = 'EMAIL';
	ftypes[0] = 'email';
	fnames[1] = 'MMERGE1';
	ftypes[1] = 'birthday';
	fnames[2] = 'MMERGE2';
	ftypes[2] = 'text';
	try {
		var jqueryLoaded = jQuery;
		jqueryLoaded = true;
	} catch (err) {
		var jqueryLoaded = false;
	}
	var head = document.getElementsByTagName('head')[0];
	if (!jqueryLoaded) {
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js';
		head.appendChild(script);
		if (script.readyState && script.onload !== null) {
			script.onreadystatechange = function() {
				if (this.readyState == 'complete')
					mce_preload_check();
			}
		}
	}
	var script = document.createElement('script');
	script.type = 'text/javascript';
	script.src = 'http://downloads.mailchimp.com/js/jquery.form-n-validate.js';
	head.appendChild(script);
	var err_style = '';
	try {
		err_style = mc_custom_error_style;
	} catch (e) {
		err_style = '#mc_embed_signup div.mce_inline_error{margin: 0 0 1em 0; padding: 5px 10px; font-weight: bold; z-index: 1; color:red;}';
	}
	var head = document.getElementsByTagName('head')[0];
	var style = document.createElement('style');
	style.type = 'text/css';
	if (style.styleSheet) {
		style.styleSheet.cssText = err_style;
	} else {
		style.appendChild(document.createTextNode(err_style));
	}
	head.appendChild(style);
	setTimeout('mce_preload_check();', 250);

	var mce_preload_checks = 0;
	function mce_preload_check() {
		if (mce_preload_checks > 40)
			return;
		mce_preload_checks++;
		try {
			var jqueryLoaded = jQuery;
		} catch (err) {
			setTimeout('mce_preload_check();', 250);
			return;
		}
		try {
			var validatorLoaded = jQuery("#fake-form").validate({});
		} catch (err) {
			setTimeout('mce_preload_check();', 250);
			return;
		}
		mce_init_form();
	}
	function mce_init_form() {
		jQuery(document).ready(function(){
							var options = {
								errorClass : 'mce_inline_error',
								errorElement : 'div',
								onkeyup : function() {
								},
								onfocusout : function() {
								},
								onblur : function() {
								}
							};
							var mce_validator = jQuery("#mc-embedded-subscribe-form")
									.validate(options);
							jQuery("#mc-embedded-subscribe-form").unbind('submit');//remove the validator so we can get into beforeSubmit on the ajaxform, which then calls the validator
							options = {
								url : 'http://catwalk88.us7.list-manage.com/subscribe/post-json?u=3934a2fa249e40316ae4b46b0&id=700291c66a&c=?',
								type : 'GET',
								dataType : 'json',
								contentType : "application/json; charset=utf-8",
								beforeSubmit : function() {
									jQuery('#mce_tmp_error_msg').remove();
									jQuery('.datefield', '#mc_embed_signup')
											.each(
													function() {
														var txt = 'filled';
														var fields = new Array();
														var i = 0;
														jQuery(':text', this)
																.each(
																		function() {
																			fields[i] = this;
																			i++;
																		});
														jQuery(':hidden', this)
																.each(
																		function() {
																			var bday = false;
																			if (fields.length == 2) {
																				bday = true;
																				fields[2] = {
																					'value' : 1970
																				};//trick birthdays into having years
																			}
																			if (fields[0].value == 'MM'
																					&& fields[1].value == 'DD'
																					&& (fields[2].value == 'YYYY' || (bday && fields[2].value == 1970))) {
																				this.value = '';
																			} else if (fields[0].value == ''
																					&& fields[1].value == ''
																					&& (fields[2].value == '' || (bday && fields[2].value == 1970))) {
																				this.value = '';
																			} else {
																				if (/\[day\]/
																						.test(fields[0].name)) {
																					this.value = fields[1].value
																							+ '/'
																							+ fields[0].value
																							+ '/'
																							+ fields[2].value;
																				} else {
																					this.value = fields[0].value
																							+ '/'
																							+ fields[1].value
																							+ '/'
																							+ fields[2].value;
																				}
																			}
																		});
													});
									return mce_validator.form();
								},
								success : mce_success_cb
							};
							jQuery('#mc-embedded-subscribe-form').ajaxForm(options);

						});
	}
	function mce_success_cb(resp) {
		jQuery('#mce-success-response').hide();
		jQuery('#mce-error-response').hide();
		if (resp.result == "success") {
			jQuery('#mce-' + resp.result + '-response').show();
			jQuery('#mce-' + resp.result + '-response').html(resp.msg);
			jQuery('#mc-embedded-subscribe-form').each(function() {
				this.reset();
			});
		} else {
			var index = -1;
			var msg;
			try {
				var parts = resp.msg.split(' - ', 2);
				if (parts[1] == undefined) {
					msg = resp.msg;
				} else {
					i = parseInt(parts[0]);
					if (i.toString() == parts[0]) {
						index = parts[0];
						msg = parts[1];
					} else {
						index = -1;
						msg = resp.msg;
					}
				}
			} catch (e) {
				index = -1;
				msg = resp.msg;
			}
			try {
				if (index == -1) {
					jQuery('#mce-' + resp.result + '-response').show();
					jQuery('#mce-' + resp.result + '-response').html(msg);
				} else {
					err_id = 'mce_tmp_error_msg';
					html = '<div id="'+err_id+'" style="'+err_style+'"> ' + msg
							+ '</div>';

					var input_id = '#mc_embed_signup';
					var f = jQuery(input_id);
					if (ftypes[index] == 'address') {
						input_id = '#mce-' + fnames[index] + '-addr1';
						f = jQuery(input_id).parent().parent().get(0);
					} else if (ftypes[index] == 'date') {
						input_id = '#mce-' + fnames[index] + '-month';
						f = jQuery(input_id).parent().parent().get(0);
					} else {
						input_id = '#mce-' + fnames[index];
						f = jQuery().parent(input_id).get(0);
					}
					if (f) {
						jQuery(f).append(html);
						jQuery(input_id).focus();
					} else {
						jQuery('#mce-' + resp.result + '-response').show();
						jQuery('#mce-' + resp.result + '-response').html(msg);
					}
				}
			} catch (e) {
				jQuery('#mce-' + resp.result + '-response').show();
				jQuery('#mce-' + resp.result + '-response').html(msg);
			}
		}
	}
</script>
<!--End mc_embed_signup-->
